package main.pages;

import java.util.ArrayList;

import main.interfaces.Item;
import main.interfaces.Page;

public class Category extends Page implements Item {

	private Category parent;
	private ArrayList<Item> listOfItems;
	
	public Category(String name, Category parent){
		super(name, parent.getChildLocation(), Type.CATEGORY);
		this.parent = parent;
		listOfItems = new ArrayList<Item>();
	}

	
	public String buildContent(){
		String write = "";

		//Location line and Slideshow 
		write += buildTopLine();		
		
		//Grid
		write += "<div class='row'>";
		for(int i=0; i<listOfItems.size(); i++){
			Item item = listOfItems.get(i);

			write += "<div class='small-6 medium-4 large-3 columns end'><div class='row'><div class='small-12 columns'>";
			write += "<a href=\"" + getReverseLocation() + item.getLocation() + item.getHTMLName() + ".html#\"><img src=\"" + getReverseLocation() + "Images/" + item.getLoc() + "SQB " + item.getPicName() + " Marzipan Lollipops Marzipops.jpg\"></img></a>";
			write += "<p class='center'>" + item.getTextName() + "</p>";
			write += "</div></div></div>";

			if((i + 1) % 2 == 0 && isNormal){
				write += "<div class='small-12 show-for-small-only columns'>&nbsp;</div>";
			}
			if((i + 1) % 3 == 0 && isNormal){
				write += "<div class='small-12 show-for-medium-only columns'>&nbsp;</div>";
			}
			if((i + 1) % 4 == 0 && isNormal){
				write += "<div class='small-12 show-for-large-up columns'>&nbsp;</div>";
			}
		}
		write += "</div>";


		//Bottom Forum
		if(!isNormal){
			if(getLinkName().equals("index") || getLinkName().equals("Shop")){				
				write += "<div class='row'>";
					write += "<div class='small-12 medium-6 large-4 small-centered columns'><form action='//formspree.io/" + Constants.EMAIL + "' method='POST' name='emailList1' onSubmit='return emailList(true)'>";
						write += "<p>Stay up to date: Sign up for our email!</p>";
						write += "<span class='inlineBlock'><input type='text' name='email' placeholder='Email'>";
						write += "<input type='hidden' name='_subject' value='For Email List'>";
						write += "<input type='hidden' name='_next' value='" + getLinkName() + "signedup.html#signedUp'>";
						write += "</span>&nbsp;&nbsp;&nbsp";
						write += "<button type='submit' id='shopButton' class='backBlue'><p class='fontWhite'>Send</p></button></form>";
					write += "</div>";
				write += "</div>";
			}else{
				write += "<div class='row' id='signedUp'>";
					write += "<div class='small-12 medium-6 large-4 small-centered columns'>";
						write += "<p class='center'>Sweet, you're on the list!</p>";
					write += "</div>";
				write += "</div>";
			}
		}

		return write;
	}
	
}
